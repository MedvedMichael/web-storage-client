(this["webpackJsonpweb-storage-client"]=this["webpackJsonpweb-storage-client"]||[]).push([[0],Array(29).concat([function(e,t,n){e.exports=n.p+"static/media/videocam-dark.c3847802.jpg"},function(e,t,n){e.exports=n(60)},,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),s=n.n(o),c=(n(35),n(4)),i=n(5),u=n(7),l=n(6),d=n(13),p=n(8),m=n(1),f=n.n(m),v=n(2),b=(n(37),n(14)),g=function e(){var t=this;Object(c.a)(this,e),this._apiBase="https://mike-test-heroku-node.herokuapp.com/api",this.getResourse=function(){var e=Object(v.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase).concat(n));case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(n));case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.findVideosetsByName=function(){var e=Object(v.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getResourse("/findvideosets?name=".concat(n));case 3:return a=e.sent,e.abrupt("return",a.map(t._transformItem));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{error:!0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.getLast10Videosets=function(){var e=Object(v.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.getResourse("/videosets-last-10?categoryId=".concat(n)).then((function(e){return e.map(t._transformItem)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllSubcategories=Object(v.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("/subcategoriesall");case 2:return n=e.sent,e.abrupt("return",n.map(t._transformItem));case 4:case"end":return e.stop()}}),e)}))),this.getAllUsers=Object(v.a)(f.a.mark((function e(){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("token"),e.next=3,fetch("".concat(t._apiBase,"/usersall"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 3:if((a=e.sent).ok){e.next=6;break}return e.abrupt("return",{error:!0});case 6:return e.next=8,a.json();case 8:return r=e.sent,e.abrupt("return",r.map(t._transformItem));case 10:case"end":return e.stop()}}),e)}))),this.patchUserByMainAdmin=function(){var e=Object(v.a)(f.a.mark((function e(n,a){var r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("token"),e.next=3,fetch("".concat(t._apiBase,"/users?id=").concat(n),{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(a)});case 3:if((o=e.sent).ok){e.next=6;break}return e.abrupt("return",{error:!0});case 6:return e.next=8,o.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.postCategory=function(){var e=Object(v.a)(f.a.mark((function e(n){var a,r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:n,isPublished:!0},r=localStorage.getItem("token"),e.next=4,fetch("".concat(t._apiBase,"/categories"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(a)});case 4:if((o=e.sent).ok){e.next=7;break}return e.abrupt("return",{error:!0});case 7:return e.next=9,o.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.postSubcategory=function(){var e=Object(v.a)(f.a.mark((function e(n,a){var r,o,s,c,i=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:"text",o={name:n,type:r},s=localStorage.getItem("token"),e.next=5,fetch("".concat(t._apiBase,"/subcategories?categoryId=").concat(a),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(o)});case 5:if((c=e.sent).ok){e.next=8;break}return e.abrupt("return",{error:!0});case 8:return e.next=10,c.json();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.postVideoset=function(){var e=Object(v.a)(f.a.mark((function e(n,a){var r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={name:n},o=localStorage.getItem("token"),e.next=4,fetch("".concat(t._apiBase,"/videoset?subcategoryId=").concat(a),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},body:JSON.stringify(r)});case 4:if(e.sent.ok){e.next=7;break}return e.abrupt("return",{error:!0});case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.postFormData=function(){var e=Object(v.a)(f.a.mark((function e(n,a,r,o,s){var c,i,u,l,d,p;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=localStorage.getItem("token"),e.next=3,fetch("".concat(t._apiBase).concat(n).concat(a),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(s)});case 3:if((i=e.sent).ok){e.next=6;break}return e.abrupt("return",{error:!0});case 6:return e.next=8,i.json();case 8:return u=e.sent,l=u._id,(d=new FormData).append(o,r),p=n.slice(0,n.indexOf("?")),e.next=15,fetch("".concat(t._apiBase).concat(p,"/upload/").concat(l),{method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(c)},body:d});case 15:if(e.sent.ok){e.next=18;break}return e.abrupt("return",{error:!0});case 18:return e.abrupt("return",{ok:!0});case 19:case"end":return e.stop()}}),e)})));return function(t,n,a,r,o){return e.apply(this,arguments)}}(),this.postPicture=function(){var e=Object(v.a)(f.a.mark((function e(n,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.postFormData("/picture?pictureSliderId=",n,a,"image",{source:"local"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.postLogo=function(){var e=Object(v.a)(f.a.mark((function e(n,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.postFormData("/logo?videosetId=",n,a,"image",{source:"local"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.postVideo=function(){var e=Object(v.a)(f.a.mark((function e(n,a,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.postFormData("/video?videosContainerId=",n,r,"video",{source:"local",name:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),this.postURLVideo=function(){var e=Object(v.a)(f.a.mark((function e(n,a,r){var o,s,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={source:"external",name:a,file:r},s=localStorage.getItem("token"),e.next=4,fetch("".concat(t._apiBase,"/video?videosContainerId=").concat(n),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(o)});case 4:if((c=e.sent).ok){e.next=7;break}return e.abrupt("return",{error:!0});case 7:return e.next=9,c.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),this.postSlider=function(){var e=Object(v.a)(f.a.mark((function e(n){var a,r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("token"),e.next=3,fetch("".concat(t._apiBase,"/picture-slider?videosetId=").concat(n),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});case 3:if((r=e.sent).ok){e.next=6;break}return e.abrupt("return",{error:!0});case 6:return e.next=8,r.json();case 8:return o=e.sent,e.abrupt("return",t._transformItem(o));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.postVideosContainer=function(){var e=Object(v.a)(f.a.mark((function e(n){var a,r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("token"),e.next=3,fetch("".concat(t._apiBase,"/videos-container?videosetId=").concat(n),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});case 3:if((r=e.sent).ok){e.next=6;break}return e.abrupt("return",{error:!0});case 6:return e.next=8,r.json();case 8:return o=e.sent,e.abrupt("return",t._transformItem(o));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteItem=function(){var e=Object(v.a)(f.a.mark((function e(n,a){var r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("token"),e.next=3,fetch("".concat(t._apiBase).concat(n,"?id=").concat(a),{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}});case 3:if((o=e.sent).ok){e.next=6;break}return e.abrupt("return",{error:!0});case 6:return e.next=8,o.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.deleteSlider=function(){var e=Object(v.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.deleteItem("/picture-slider",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteVideosContainer=function(){var e=Object(v.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.deleteItem("/videos-container",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteVideoset=function(){var e=Object(v.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.deleteItem("/videoset",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteCategory=function(){var e=Object(v.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.deleteItem("/categories",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteSubcategory=function(){var e=Object(v.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.deleteItem("/subcategories",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteLogo=function(){var e=Object(v.a)(f.a.mark((function e(n){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("token"),e.next=3,fetch("".concat(t._apiBase,"/logo?videosetId=").concat(n),{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});case 3:if((r=e.sent).ok){e.next=6;break}return e.abrupt("return",{error:!0});case 6:return e.next=8,r.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.patchVideosContainer=function(){var e=Object(v.a)(f.a.mark((function e(n,a){var r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("token"),e.next=3,fetch("".concat(t._apiBase,"/videos-container?id=").concat(n),{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(a)});case 3:if((o=e.sent).ok){e.next=6;break}return e.abrupt("return",{error:!0});case 6:return e.next=8,o.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.patchVideoset=function(){var e=Object(v.a)(f.a.mark((function e(n,a){var r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("token"),e.next=3,fetch("".concat(t._apiBase,"/videosets?videosetId=").concat(n),{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(a)});case 3:if((o=e.sent).ok){e.next=6;break}return e.abrupt("return",{error:!0});case 6:return e.next=8,o.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.deletePhoto=function(){var e=Object(v.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.deleteItem("/picture",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteVideo=function(){var e=Object(v.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.deleteItem("/video",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getPicturesOfSlider=function(){var e=Object(v.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("/pictures?pictureSliderId=".concat(n));case 2:return a=e.sent,e.abrupt("return",a.map((function(e){return"".concat(t._apiBase,"/picture/").concat(e._id)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.signInByCredentials=function(){var e=Object(v.a)(f.a.mark((function e(n,a){var r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={email:n,password:a},"/users/login",e.next=4,fetch("".concat(t._apiBase).concat("/users/login"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 4:if((o=e.sent).ok){e.next=7;break}return e.abrupt("return",{ok:!1,error:o.statusText});case 7:return e.next=9,o.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.registerByCredentials=function(){var e=Object(v.a)(f.a.mark((function e(n,a,r,o){var s,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={name:n,nickname:a,email:r,password:o},"/users",e.next=4,fetch("".concat(t._apiBase).concat("/users"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 4:return c=e.sent,e.next=7,c.json();case 7:if(i=e.sent,c.ok){e.next=10;break}return e.abrupt("return",t.checkDataForErrors(i));case 10:return e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),this.getUserProfile=function(){var e=Object(v.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/users/me",e.next=3,fetch("".concat(t._apiBase).concat("/users/me"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 3:if((a=e.sent).ok){e.next=6;break}return e.abrupt("return",{error:!0});case 6:return e.next=8,a.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.checkDataForErrors=function(e){if("ValidationError"===e.name)for(var t=e.errors,n=Object.keys(t),a=0;a<n.length;a++){var r=n[a];if("required"===t[r].kind)return{error:"Please enter all information"};if("user defined"===t[r].kind)return{error:"Invalid ".concat(r,"!")};if("minlength"===t[r].kind&&"password"===r)return{error:"Password should contain at least 7 characters!"}}else if("MongoError"===e.name)return{error:"This e-mail is already used, try another"}},this.getAllCategories=Object(v.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("/categories");case 2:return n=e.sent,e.abrupt("return",n.map(t._transformItem));case 4:case"end":return e.stop()}}),e)}))),this.getSubcategoriesOfCategory=function(){var e=Object(v.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("/subcategories?categoryId=".concat(n));case 2:return a=e.sent,e.abrupt("return",a.map(t._transformItem));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getSubcategory=function(){var e=Object(v.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("/subcategories/".concat(n));case 2:return a=e.sent,e.abrupt("return",t._transformItem(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getCategory=function(){var e=Object(v.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("/categories/".concat(n));case 2:return a=e.sent,e.abrupt("return",t._addSubcategoriesToCategory(t._transformItem(a)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getVideosetsOfSubcategory=function(){var e=Object(v.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("/videosets?subcategoryId=".concat(n));case 2:return a=e.sent,e.abrupt("return",a.map(t._transformItem));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getVideoset=function(){var e=Object(v.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("/videoset/".concat(n));case 2:return a=e.sent,e.abrupt("return",t._transformItem(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getVideosOfVideosContainer=function(){var e=Object(v.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("/videos?videosContainerId=".concat(n));case 2:return a=e.sent,e.abrupt("return",a.map(t._transformItem));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._transformItem=function(e){return Object(b.a)(Object(b.a)({},e),{},{id:e._id})},this._addSubcategoriesToCategory=function(){var e=Object(v.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResourse("/subcategories?categoryId=".concat(n.id));case 2:return a=e.sent,e.abrupt("return",Object(b.a)(Object(b.a)({},n),{},{subItems:a}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=(n(38),function(){return r.a.createElement("div",{className:"lds-css"},r.a.createElement("div",{className:"lds-double-ring"},r.a.createElement("div",null),r.a.createElement("div",null)))}),w=(n(39),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={itemList:null,selected:null},e.componentDidUpdate=function(t){t.itemList===e.props.itemList&&e.props.maxNumber===t.maxNumber||e.updateList()},e.updateList=function(){var t=e.props,n=t.itemList,a=t.maxNumber;e.setState({itemList:n,maxNumber:a,selected:null})},e.onItemSelected=function(t,n){e.setState({selected:n}),e.props.onItemSelected(t)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.updateList()}},{key:"render",value:function(){var e=this,t=this.state,n=t.itemList,a=t.maxNumber,o=t.selected,s=this.props.renderItems;if(!n)return r.a.createElement(h,null);var c=a||n.length,i=n.slice(0,c),u=s?s(i,o,this.onItemSelected):i.map((function(t,n){var a=t.name,s=t.id;return r.a.createElement("li",{className:"list-group-item ".concat(n===o?"selected-list-group-item":""),key:s,onClick:function(){return e.onItemSelected(t,n)}},a)}));return r.a.createElement("div",null,r.a.createElement("ul",{className:"item-list list-group"},u),r.a.createElement("div",{style:{display:"flex"}},a&&a<n.length?r.a.createElement("button",{type:"button",className:"show-more-button btn btn-lg btn-outline-success",onClick:this.props.showMore},"Show more"):null))}}]),n}(a.Component)),x=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).webStorageService=new g,e.state={foundVideosets:null,search:""},e.onSignOutButtonClick=function(){localStorage.setItem("user",""),localStorage.setItem("token",""),e.props.onUserUpdate()},e.componentDidMount=Object(v.a)(f.a.mark((function t(){var n,a,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=localStorage.getItem("token"),a=localStorage.getItem("user"),n&&a){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.webStorageService.getUserProfile(n);case 5:if(!(r=t.sent).error){t.next=8;break}return t.abrupt("return",e.updateLocalStorage());case 8:e.updateLocalStorage(JSON.stringify(r),n);case 9:case"end":return t.stop()}}),t)}))),e.updateLocalStorage=function(t,n){localStorage.setItem("user",t),localStorage.setItem("token",n),e.props.onUserUpdate()},e.findVideosets=function(){var t=Object(v.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({search:n}),""!==n){t.next=3;break}return t.abrupt("return",e.setState({foundVideosets:null}));case 3:return t.next=5,e.webStorageService.findVideosetsByName(n);case 5:(a=t.sent).error||e.setState({foundVideosets:a,search:""});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.user,n=this.state.foundVideosets,a=r.a.createElement("div",{className:"search-input-form"},r.a.createElement("input",{onChange:function(t){var n=t.target;return e.findVideosets(n.value)},className:"form-control mr-sm-2",type:"text",placeholder:"Search"})),o=function(e){var t=e.id,n=e.name,a=e.onClick,o=Object(p.f)();return r.a.createElement("li",{className:"list-group-item",key:"Found".concat(t),onClick:function(){a(),o.push("../"),o.push("/videosets/".concat(t))}},n)},s=n?r.a.createElement(w,{itemList:n,renderItems:function(t){return t.map((function(t){var n=t.id,a=t.name;return r.a.createElement(o,{key:"Found".concat(n),id:n,name:a,onClick:function(){return e.setState({foundVideosets:null})}})}))}}):null,c=function(){var e=Object(p.f)();return r.a.createElement("button",{onClick:function(){e.push("/users")},className:"btn btn-primary",type:"submit"},"View all users")},i=t?r.a.createElement("div",{className:"user-card card"},r.a.createElement("h5",{className:"welcome-title"},"Welcome back, ",t.name,"!"),r.a.createElement("div",{className:"header-button-group"},r.a.createElement("button",{className:"btn btn-secondary header-button profile-button",type:"submit"},"View profile"),r.a.createElement("button",{className:"btn btn-secondary header-button signout-button",type:"submit",onClick:this.onSignOutButtonClick},"Sign out")),r.a.createElement("div",{className:"btn-group"},"main-admin"===t.status?r.a.createElement(c,null):null)):r.a.createElement("h2",{className:"login-link"},r.a.createElement(d.b,{to:"/login"},"Login"));return r.a.createElement("div",{className:"header d-flex"},r.a.createElement("div",{className:"web-storage-title"},r.a.createElement(d.b,{to:"/"},"Web Storage")),r.a.createElement("div",{className:"flex header-card-box"},i,a,r.a.createElement("div",{className:"found-videosets"},s)))}}]),n}(a.Component),k=(n(44),n(15)),E=(n(45),function(e){var t=e.editable,n=e.children,o=e.onFilesAdded,s=e.extraClassName,c=Object(a.useState)(!1),i=Object(k.a)(c,2),u=i[0],l=i[1],d="card drop-area ".concat(s&&!u?s:""," ").concat(u?"highlight border-success":"");return t?r.a.createElement("div",{className:d,onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),l(!0)},onDragOver:function(e){e.preventDefault(),e.stopPropagation(),l(!0)},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),l(!1)},onDrop:function(e){e.preventDefault(),e.stopPropagation(),l(!1),o(e.dataTransfer)}},n):r.a.createElement("div",null,n)}),S=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={slides:null,slideIndex:null,editable:!1},e.initSlides=function(){var t=e.props,n=t.dataURLs,a=t.editable,o=t.slideIndex,s=n?n.map((function(e){return document.createElement("img").src=e,r.a.createElement(y,{key:e,path:e})})):null;e.setState({slides:s,slideIndex:o&&o>=0?o:0,editable:a||!1})},e.changeSlideIndex=function(t){var n=e.state,a=n.slides,r=n.slideIndex+t;r>=a.length&&(r-=a.length),r<0&&(r+=a.length),e.setState({slideIndex:r})},e.onPrevButtonClick=function(){e.changeSlideIndex(-1)},e.onNextButtonClick=function(){e.changeSlideIndex(1)},e.onDotClick=function(t){var n=e.state.slideIndex;e.changeSlideIndex(t-n)},e.onPictureAdded=function(){var t=Object(v.a)(f.a.mark((function t(n){var a,r,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.files,r=e.props.uploadingPicture,o=0;case 3:if(!(o<a.length)){t.next=9;break}return t.next=6,r(e.props.id,e.state.slideIndex,a[o]);case 6:o++,t.next=3;break;case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onPictureDeleted=function(){var t=e.state,n=t.slides,a=t.slideIndex,r=n[a];e.props.deletingPicture(e.props.id,a,r.props.path)},e.componentDidUpdate=function(t){t.dataURLs!==e.props.dataURLs&&e.initSlides()},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.initSlides()}},{key:"render",value:function(){var e=this,t=this.state,n=t.slides,a=t.slideIndex,o=t.editable,s=o?r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"file-upload",className:"btn btn-outline-success custom-file"},"Upload pictures"),r.a.createElement("input",{multiple:"multiple",onChange:function(t){var n=t.target;return e.onPictureAdded(n)},id:"file-upload",type:"file",className:"custom-file-input"})):null;if(!n||0===n.length)return r.a.createElement(E,{editable:!0,onFilesAdded:this.onPictureAdded},r.a.createElement("h3",{className:"error-message"},"There's no content"),r.a.createElement("div",{className:"add-delete-btn-container"},r.a.createElement("div",{className:"add-delete-btn-group btn-group"},s)));if(!n[a])return r.a.createElement(h,null);var c=n[a],i=n.map((function(t,n){var o=n===a;return r.a.createElement(N,{isActive:o,id:n,onClick:e.onDotClick,key:"dot"+n})})),u=o?r.a.createElement("div",{className:"add-delete-btn-container"},r.a.createElement("div",{className:"add-delete-btn-group btn-group"},s,r.a.createElement("button",{type:"button",className:"btn btn-outline-danger",onClick:function(){return e.onPictureDeleted()}},"Delete picture"))):null;return r.a.createElement("div",{className:"content"},r.a.createElement(E,{editable:o,onFilesAdded:this.onPictureAdded},r.a.createElement("div",{className:"slider"},r.a.createElement("div",{className:"wrap"},c,r.a.createElement("div",{className:"prev",onClick:this.onPrevButtonClick},r.a.createElement("div",{className:"arrow-left"})),r.a.createElement("div",{className:"next",onClick:this.onNextButtonClick},r.a.createElement("div",{className:"arrow-right"}))),r.a.createElement("div",{className:"slider-dots"},i),u)))}}]),n}(a.Component),y=function(e){var t=e.path;return r.a.createElement("div",{className:"slider-item"},r.a.createElement("img",{src:t,alt:"slider"}))},N=function(e){var t=e.isActive,n=e.id,a=e.onClick,o="dot"+(t?" dot-active":"");return r.a.createElement("div",{className:o,onClick:function(){return a(n)}})},C=n(19),O=function(e){return a.createElement("div",{className:"editor"},a.createElement(C.a,Object.assign({onDragEnd:e.onDragEnd},e)))},j=function(e){var t=e.droppableId,n=e.className,r=e.children;return a.createElement(C.c,{droppableId:t},(function(e){var t=e.innerRef,o=e.droppableProps,s=e.droppablePlaceholder;return a.createElement("div",Object.assign({className:n,ref:t},o,s),r)}))},I=function(e){var t=e.draggableId,n=e.index,r=e.className,o=e.children;return a.createElement(C.b,{draggableId:t,index:n},(function(e){var t=e.innerRef,n=e.draggableProps,s=e.dragHandleProps;return a.createElement("div",Object.assign({className:r,ref:t},n,s),o)}))},V=(n(47),n(48),function(e){var t=e.children,n=e.header;return r.a.createElement("div",{className:"card wrapper-card"},n||r.a.createElement("div",{className:"mb-4"}),r.a.createElement("div",{className:"wrapper-card-content"},t))}),D=function(e){var t=e.content,n=e.value,r=e.itemPosition,o=e.onItemDeleted,s=a.createElement("div",{className:"delete-item-button"},a.createElement("button",{className:"close",type:"button","data-dismiss":"modal","aria-label":"Close",onClick:function(){return o(n)}},a.createElement("span",{"aria-hidden":"true"},"\xd7")));return a.createElement(I,{draggableId:n,index:r},a.createElement("div",{className:"draggable-box"},a.createElement(V,{header:s},a.createElement("div",null,t))))};var L=function(e){var t=e.items,n=e.onItemDeleted;return a.createElement("div",null," ",t.map((function(e,t){return function(e,t,n){return a.createElement(D,{onItemDeleted:n,key:e.props.id,className:"box",itemPosition:t,value:e.props.id,content:e})}(e,t,n)}))," ")},P=function(e){var t=e.id,n=e.items,r=e.onItemDeleted;return t=String(t),a.createElement(j,{droppableId:t,className:"source"},a.createElement(L,{items:n,onItemDeleted:r}))},T=(n(49),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={text:"",editable:!1,editableText:"",editableTitle:"",editStatus:!1},e.componentDidMount=function(){var t=e.props,n=t.text,a=t.editable;e.setState({text:n||"&&&",editable:a||!1})},e.componentDidUpdate=function(t){e.props.text!==t.text&&e.setState({text:e.props.text})},e.onSaveClick=function(){var t=e.state,n=t.editableText,a=t.editableTitle,r=(""!==a?a:"Description")+"&&&"+n;e.setState({text:r,editStatus:!1}),e.props.saveDescription(e.props.id,r)},e.onChangeClick=function(){var t=e.state,n=!t.editStatus,a=t.text.split("&&&"),r=Object(k.a)(a,2),o=r[0],s=r[1];e.setState({editStatus:n,editableText:s,editableTitle:o})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.editable,a=t.editableText,o=t.editStatus,s=t.text,c=t.editableTitle,i=s.split("&&&"),u=Object(k.a)(i,2),l=u[0],d=u[1],p=o?r.a.createElement("textarea",{className:"form-control edit-title-area",rows:"1",onChange:function(t){var n=t.target;e.setState({editableTitle:n.value})},value:c}):r.a.createElement("h3",{className:"text-success"}," ",l&&""!==l?l:"Description",": "),m=r.a.createElement("div",{className:"form-group text-field"},r.a.createElement("textarea",{className:"form-control edit-text-area",rows:"3",onChange:function(t){var n=t.target;e.setState({editableText:n.value})},value:a}),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{type:"button",className:"btn btn-success save-btn",onClick:function(){e.onSaveClick()}},"Save changes"),r.a.createElement("button",{type:"button",className:"btn btn-secondary save-btn","data-dismiss":"modal",onClick:function(){return e.setState({editStatus:!e.state.editStatus})}},"Close"))),f=n?r.a.createElement("div",{className:"change-btn"},r.a.createElement("button",{type:"button",className:"btn btn-outline-success btn-lg",onClick:function(){e.onChangeClick()}},"Change")):null,v=d?d.split("\n").map((function(e,t){return r.a.createElement("h4",{key:"description-line".concat(t),className:"description"},e)})):"",b=r.a.createElement("div",{className:"card-body"},o?m:v);return r.a.createElement("div",{className:"videoset-description"},r.a.createElement(U,{left:p,right:b}),r.a.createElement("div",null,o?null:f))}}]),n}(a.Component)),U=function(e){var t=e.left,n=e.right;return r.a.createElement("div",{className:"row mb2"},r.a.createElement("div",{className:"row-item"},t),r.a.createElement("div",{className:"col-md-9"},n))},A=T,B=(n(50),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).webStorageService=new g,e.state={isDropdownMenuOpened:!1,videosetItems:{PictureSlider:"Slider",VideosetDescription:"Description",Videos:"Videos"},isDropdownSubcategoryMenuOpened:!1,subcategories:[],videoset:null},e.componentDidMount=Object(v.a)(f.a.mark((function t(){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.videoset,t.next=3,e.webStorageService.getAllSubcategories();case 3:a=t.sent,e.setState({subcategories:a,videoset:n});case 5:case"end":return t.stop()}}),t)}))),e.onDropdownMenuClick=function(){var t=!e.state.isDropdownMenuOpened;e.setState({isDropdownMenuOpened:t})},e.onDropdownItemClick=function(t){e.props.onVideosetElementAdded(t),e.onDropdownMenuClick()},e.onDropdownSubcategoryMenuClick=function(){var t=!e.state.isDropdownSubcategoryMenuOpened;e.setState({isDropdownSubcategoryMenuOpened:t})},e.onSubcategoryItemClick=function(){var t=Object(v.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.changeSubcategory(n);case 2:e.onDropdownSubcategoryMenuClick();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSaveChangesButtonClick=Object(v.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.saveChanges();case 2:case"end":return t.stop()}}),t)}))),e.onCancelButtonClick=function(){e.props.cancelAction()},e.onChangeTitleButtonClick=function(){e.props.changeTitle()},e.onDeleteVideosetClickButton=Object(v.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.deleteVideoset();case 2:case"end":return t.stop()}}),t)}))),e.onChangeLogoButtonClick=function(){var t=Object(v.a)(f.a.mark((function t(n){var a,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.files,console.log("KU"),t.next=4,e.props.changeLogo(a[0]);case 4:(r=e.state.videoset).hasLogo=!0,e.setState({videoset:r});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onDeleteLogoButtonClick=Object(v.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.webStorageService.deleteLogo(e.state.videoset.id);case 2:(n=e.state.videoset).hasLogo=!1,e.setState({videoset:n});case 5:case"end":return t.stop()}}),t)}))),e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.isDropdownMenuOpened,a=t.isDropdownSubcategoryMenuOpened,o=t.videosetItems,s=t.subcategories,c=t.videoset,i="dropdown-menu ".concat(n?"show":""),u="dropdown-menu ".concat(a?"show":""),l=function(e){var t=e.id,n=e.onClick,a=Object(p.f)(),o=function(){var e=Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:a.push("/videosets/".concat(t));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("button",{className:"btn btn-outline-success",onClick:o},"Save changes")},d=function(e){var t=e.onClick,n=Object(p.f)(),a=function(){var e=Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:n.push("/");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("button",{className:"change-title btn btn-danger",onClick:a},"Delete videoset")},m=r.a.createElement(l,{id:this.props.id,onClick:Object(v.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onSaveChangesButtonClick();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))}),b=Object.values(o).map((function(t){return r.a.createElement("div",{key:"add ".concat(t)},r.a.createElement("span",{className:"dropdown-item",onClick:function(){return e.onDropdownItemClick(t)}},t))})),g=s?s.find((function(e){var t=e.id;return c.owner===t})):0,h=s?s.filter((function(e){return e.owner===g.owner})).map((function(t){var n=t.id,a=t.name;return r.a.createElement("div",{key:"add ".concat(n)},r.a.createElement("span",{className:"dropdown-item ".concat(c.owner===n?"text-info":""),onClick:function(){return e.onSubcategoryItemClick(n)}},a))})):null,w=r.a.createElement("button",{type:"button",className:"change-title btn btn-primary",onClick:this.onChangeTitleButtonClick},"Change title"),x=r.a.createElement("div",{className:"change-title"},r.a.createElement("label",{htmlFor:"logo-upload",className:"btn btn-warning custom-file"},"Upload logo"),r.a.createElement("input",{onChange:function(t){var n=t.target;return e.onChangeLogoButtonClick(n)},id:"logo-upload",type:"file",className:"custom-file-input"})),k=r.a.createElement("button",{type:"button",className:"change-title btn btn-danger",onClick:this.onDeleteLogoButtonClick},"Delete logo"),E=r.a.createElement(d,{id:this.props.id,onClick:Object(v.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onDeleteVideosetClickButton();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))});return r.a.createElement("div",{className:"editor-bar-container"},r.a.createElement("div",{className:"card editor-bar"},r.a.createElement("ul",{className:"nav nav-pills"},r.a.createElement("li",{className:"nav-item dropdown add-dropdown"},r.a.createElement("h4",{className:"nav-link dropdown-toggle","data-toggle":"dropdown",role:"button","aria-haspopup":"true","aria-expanded":"false",onClick:function(){return e.onDropdownMenuClick()}},"Add item"),r.a.createElement("div",{className:i,"x-placement":"bottom-start"},b)),r.a.createElement("li",null,r.a.createElement("div",{className:"btn-group"},x,c&&c.hasLogo?k:null,w,E)),r.a.createElement("li",{className:"nav-item dropdown add-dropdown"},r.a.createElement("h4",{className:"nav-link dropdown-toggle","data-toggle":"dropdown",role:"button","aria-haspopup":"true","aria-expanded":"false",onClick:function(){return e.onDropdownSubcategoryMenuClick()}},"Select subcategory"),r.a.createElement("div",{className:u,"x-placement":"bottom-start"},h)),r.a.createElement("li",{className:"nav-item editor-bar-buttons"},r.a.createElement("div",{className:"btn-group"},m,r.a.createElement("button",{className:"btn btn-outline-danger",onClick:this.onCancelButtonClick},"Cancel"))))))}}]),n}(a.Component)),M=n(29),R=n.n(M),_=(n(51),n(52),function(e){var t=e.onClose,n=e.show,a=e.title,o=e.children,s=e.footer,c="video-modal modal ".concat(n?"in display-block":"display-none");return r.a.createElement("div",{className:c,tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel"},r.a.createElement("div",{className:"modal-backdrop",onClick:function(e){return"modal-backdrop"===e.target.className?t():""}},r.a.createElement("div",{className:"modal-dialog modal-lg modal-dialog-centered"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h4",{className:"modal-title"},a),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-hidden":"true",onClick:function(){return t()}},"\xd7")),r.a.createElement("div",{className:"modal-body"},o),r.a.createElement("div",{className:"modal-footer"},s,r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:t},"Go back"))))))}),F=n(18),J=n.n(F),z=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={editable:!1,editableName:!1,videos:[],showModal:!1,inputFormURL:null,name:""},e.componentDidMount=Object(v.a)(f.a.mark((function t(){var n,a,r,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.props,a=n.videos,r=n.editable,o=n.name,e.setState({name:o||"",videos:a,editable:r||!1});case 2:case"end":return t.stop()}}),t)}))),e.onVideoViewClick=function(t){var n=e.state.videos.find((function(e){return e.id===t}));e.props.onVideoClick(n)},e.uploadingVideos=function(){var t=Object(v.a)(f.a.mark((function t(n){var a,r,o,s,c,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.files,r=e.props,o=r.id,s=r.uploadingVideo,c=r.updateContainer,i=0;case 3:if(!(i<a.length)){t.next=9;break}return t.next=6,s(o,a[i]);case 6:i++,t.next=3;break;case 9:return e.setState({showModal:!1}),t.next=12,c(o);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showModal=function(){e.setState({showModal:!0})},e.uploadingURLVideo=Object(v.a)(f.a.mark((function t(){var n,a,r,o,s,c,i,u;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.inputFormURL,a=new J.a(n),"www.youtube.com"!==a.hostname){t.next=13;break}return r=a.query,o=new URLSearchParams(r.slice(1)),s=o.get("v"),c="https://www.youtube.com/embed/".concat(s),i=prompt("Input video name: ","Video"),t.next=11,e.props.uploadingURLVideo(e.props.id,i,c);case 11:t.next=16;break;case 13:return u=prompt("Input video name: ","Video"),t.next=16,e.props.uploadingURLVideo(e.props.id,u,n);case 16:e.setState({showModal:!1});case 17:case"end":return t.stop()}}),t)}))),e}return Object(i.a)(n,[{key:"saveTitle",value:function(){var e=this.state.name;this.props.saveTitle(e,this.props.id)}},{key:"render",value:function(){var e=this,t=this.state,n=t.videos,a=t.editable,o=t.showModal,s=t.name,c=t.editableName,i=this.props.id,u=a?r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"btn btn-outline-success",onClick:this.showModal},"Upload more videos")):null,l=a?r.a.createElement("div",{className:"add-videos-button"},r.a.createElement("label",{htmlFor:"file-upload",className:"btn btn-outline-success custom-file"},"Upload videos"),r.a.createElement("input",{multiple:"multiple",onChange:function(t){var n=t.target;return e.uploadingVideos(n)},id:"file-upload",type:"file",className:"custom-file-input"})):null,d=a?r.a.createElement("div",{className:"add-delete-btn-container"},r.a.createElement("div",{className:"add-delete-btn-group btn-group"},u)):null,p=o?r.a.createElement(_,{show:o,onClose:function(){return e.setState({showModal:!1})},title:"Uploading video"},r.a.createElement("div",{className:"d-flex list-group nav-pills"},r.a.createElement("div",{className:"video-modal-line"},r.a.createElement("h2",null,"Upload video from compatible services"),r.a.createElement("h4",null,"(YouTube, Google Drive, Yandex Disk)")),r.a.createElement("div",{className:"video-modal-line input-group"},r.a.createElement("input",{className:"form-control form-control-lg",onChange:function(t){var n=t.target;return e.setState({inputFormURL:n.value})}}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:this.uploadingURLVideo},"Upload"))),r.a.createElement("div",{className:"video-modal-line"},r.a.createElement("h2",{style:{textAlign:"center"}},"OR")),r.a.createElement("div",{className:"video-modal-line"},r.a.createElement("h2",null,"Upload your local videos")),r.a.createElement("div",{className:"video-modal-line"},r.a.createElement(E,{extraClassName:"border-light",editable:!0,onFilesAdded:this.uploadingVideos},r.a.createElement("div",null,r.a.createElement("div",{className:"col-lg-12 video-uploading-modal-card"},r.a.createElement("div",{className:"video-uploading-text card-body"},r.a.createElement("h4",{className:""},"Drop videos here"))))),r.a.createElement("div",{style:{display:"flex"},className:"btn-group"},l)))):null;if(!n||0===n.length)return r.a.createElement("div",null,p,r.a.createElement(E,{editable:a,key:i,onFilesAdded:this.uploadingVideos},r.a.createElement("h3",{className:"error-message"},"There's no content"),d));var m=0===n.length?r.a.createElement("h4",{className:"no-content"},"There's no content"):n.map((function(t,n){var o,s=t.name,c=t.id,i=t.owner;return r.a.createElement("div",{className:"flex video-card",key:"video".concat(n)},r.a.createElement("div",{className:"card",onClick:function(t){console.log(t),"button.btn.btn-outline-danger"!==t&&e.onVideoViewClick(c)}},r.a.createElement("div",{className:"card-header"},r.a.createElement("h5",null,s)),r.a.createElement("div",{className:"card-body"},r.a.createElement("img",{src:R.a,alt:"img"}))),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"btn-group"},(o={id:c,owner:i},a?r.a.createElement("button",{className:"btn btn-outline-danger",onClick:function(){e.props.deletingVideo(o)}},"Delete video"):null))))})),f=r.a.createElement("div",{className:"flex"},r.a.createElement("ul",{className:"nav nav-pills"},r.a.createElement("li",null,a&&c?r.a.createElement("input",{className:"form-control videos-container-title",rows:"1",onChange:function(t){var n=t.target;e.setState({name:n.value})},value:s}):r.a.createElement("h2",{className:"videos-module-title"},s||"Videos")),a?r.a.createElement("li",{className:"change-container-title btn-group"},c?r.a.createElement("button",{className:"btn btn-success",onClick:function(){e.saveTitle()}},"Save changes"):r.a.createElement("button",{className:"btn btn-success",onClick:function(){e.setState({editableName:!0})}},"Change title")):null));return r.a.createElement("div",null,p,r.a.createElement(E,{editable:a,key:i,onFilesAdded:this.uploadingVideos},f,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},m)),d)))}}]),n}(a.Component),G=function(e){var t=e.url;return r.a.createElement("div",{className:"video-player"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"thumb-wrap"},r.a.createElement("iframe",{title:t,width:"560",height:"315",src:t,frameBorder:"0",allowFullScreen:!0}))),r.a.createElement("div",{id:"grey"}))},H=(n(55),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).webStorageService=new g,e.state={data:null,startData:null,columnId:0,itemList:[],videosetId:null,counters:{},deleted:[],added:[],videoPlayer:null,showModal:!1,showVideoUploadingModal:!1},e.onDragEnd=function(){var t=Object(v.a)(f.a.mark((function t(n){var a,r,o,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.destination,r=n.source,a){t.next=3;break}return t.abrupt("return");case 3:o=e.state.itemList,s=o.splice(r.index,1)[0],o.splice(a.index,0,s),e.setState({itemList:o});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.initialAddingItems=Object(v.a)(f.a.mark((function t(){var n,a,r,o,s,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.state.data,a=n.order,r=0;case 3:if(!(r<a.length)){t.next=25;break}if("VideosetDescription"!==(o=a[r]).type||null===o.value){t.next=9;break}e.addItemToColumn(A,{text:o.value,saveDescription:e.saveDescription,editable:!0}),t.next=22;break;case 9:if("PictureSlider"!==o.type||!o.value){t.next=16;break}return t.next=12,e.webStorageService.getPicturesOfSlider(o.value);case 12:s=t.sent,e.addItemToColumn(S,{id:o.value,dataURLs:s,editable:!0,uploadingPicture:e.uploadingPicture,deletingPicture:e.deletingPicture}),t.next=22;break;case 16:if("VideosContainer"!==o.type||!o.value){t.next=22;break}return t.next=19,e.webStorageService.getVideosOfVideosContainer(o.value);case 19:return c=t.sent,t.next=22,e.addItemToColumn(z,{name:o.name,id:o.value,videos:c,saveTitle:e.saveVideosContainerTitle,deletingVideo:e.deletingVideo,uploadingURLVideo:e.uploadingURLVideo,updateContainer:e.updateContainer,editable:!0,onVideoClick:e.onVideoClick,uploadingVideo:e.uploadingVideo});case 22:r++,t.next=3;break;case 25:case"end":return t.stop()}}),t)}))),e.uploadingPicture=function(){var t=Object(v.a)(f.a.mark((function t(n,a,r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.webStorageService.postPicture(n,r);case 2:if(t.sent.ok){t.next=5;break}return t.abrupt("return");case 5:e.updateSlider(n,a);case 6:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),e.deletingPicture=function(){var t=Object(v.a)(f.a.mark((function t(n,a,r){var o,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o=r.length-1;"/"!==r[o];)o--;return s=r.substring(o+1),t.next=5,e.webStorageService.deletePhoto(s);case 5:if(!t.sent.error){t.next=8;break}return t.abrupt("return");case 8:e.updateSlider(n,a);case 9:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),e.deletingVideo=function(){var t=Object(v.a)(f.a.mark((function t(n){var a,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.id,r=n.owner,t.next=3,e.webStorageService.deleteVideo(a);case 3:if(!t.sent.error){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,e.updateContainer(r);case 8:e.setState({showModal:!1});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.updateSlider=function(){var t=Object(v.a)(f.a.mark((function t(n,a){var o,s,c,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.state.itemList,t.next=3,e.webStorageService.getPicturesOfSlider(n);case 3:s=t.sent,c=o.findIndex((function(e){return e.props.id===n})),i=r.a.createElement(S,Object.assign({},o[c].props,{dataURLs:s,slideIndex:a>0?a-1:null})),o[c]=i,e.setState({itemList:o});case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.addItemToColumn=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.state,o=a.itemList,s=a.counters;s[t.name]||(s[t.name]=0);var c=s[t.name],i=r.a.createElement(t,Object.assign({key:String(t.name)+c,id:String(t.name)+c},n));s[t.name]+=1,o.push(i),e.setState({itemList:o,counters:s})},e.onVideosetElementAdded=function(){var t=Object(v.a)(f.a.mark((function t(n){var a,r,o,s,c,i,u,l;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n,t.next="Slider"===t.t0?3:"Description"===t.t0?9:"Videos"===t.t0?12:21;break;case 3:return a=S,t.next=6,e.webStorageService.postSlider(e.props.id);case 6:return o=t.sent,r={id:o.id,editable:!0,uploadingPicture:e.uploadingPicture,deletingPicture:e.deletingPicture},t.abrupt("break",22);case 9:return a=A,r={text:"",editable:!0,saveDescription:e.saveDescription},t.abrupt("break",22);case 12:return a=z,t.next=15,e.webStorageService.postVideosContainer(e.props.id);case 15:return s=t.sent,t.next=18,e.webStorageService.getVideosOfVideosContainer(s.id);case 18:return c=t.sent,r={id:s.id,videos:c,saveTitle:e.saveVideosContainerTitle,updateContainer:e.updateContainer,uploadingURLVideo:e.uploadingURLVideo,uploadingVideo:e.uploadingVideo,onVideoClick:e.onVideoClick,editable:!0},t.abrupt("break",22);case 21:return t.abrupt("return");case 22:e.addItemToColumn(a,r),i=e.state,u=i.added,l=i.itemList,u.push(l[l.length-1]);case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.uploadingVideo=function(){var t=Object(v.a)(f.a.mark((function t(n,a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=prompt("Input video name: ","Video"),t.next=3,e.webStorageService.postVideo(n,r,a);case 3:if(t.sent.ok){t.next=6;break}return t.abrupt("return");case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.uploadingURLVideo=function(t,n,a){e.webStorageService.postURLVideo(t,n,a).then((function(){e.updateContainer(t)}))},e.updateContainer=function(){var t=Object(v.a)(f.a.mark((function t(n){var a,r,o,s,c,i,u,l=arguments;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:{},r=e.state.itemList,t.next=4,e.webStorageService.getVideosOfVideosContainer(n);case 4:o=t.sent,s=r.findIndex((function(e){return e.props.id===n})),c=Object(b.a)(Object(b.a)({},r[s].props),{},{videos:o},a),r.splice(s,1),e.setState({itemList:r}),e.addItemToColumn(z,c),i=e.state.itemList,u=i.pop(),i.splice(s,0,u),e.setState({itemList:i});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.saveVideosContainerTitle=function(t,n){t&&e.webStorageService.patchVideosContainer(n,{name:t}),e.updateContainer(n,{name:t})},e.onVideoClick=function(){var t=Object(v.a)(f.a.mark((function t(n){var a,o,s,c,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.videoPlayer,o=n.showModal,s=n.source,c=n.id,"local"===s?(a=r.a.createElement(G,{video:n,url:"".concat(e.webStorageService._apiBase,"/video/").concat(c)}),o=!0):"www.youtube.com"===(i=new J.a(n.file)).hostname?(console.log(i.hostname),a=r.a.createElement(G,{video:n,url:n.file}),o=!0):(window.open(n.file),o=!1),e.setState({videoPlayer:a,showModal:o});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onVideosetItemDeleted=function(){var t=Object(v.a)(f.a.mark((function t(n){var a,r,o,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.state,r=a.itemList,o=a.deleted,s=r.indexOf(r.find((function(e){return e.props.id===n}))),o.push(r.splice(s,1)[0]),e.setState({itemList:r,deleted:o});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.saveDescription=function(t,n){var a=e.state,o=a.itemList,s=a.counters,c=o.indexOf(o.find((function(e){return e.props.id===t}))),i=String(A.name)+s[A.name]++;o[c]=r.a.createElement(A,{editable:!0,key:i,id:i,text:n,saveDescription:e.saveDescription}),e.setState({itemList:o,counters:s})},e.saveChanges=Object(v.a)(f.a.mark((function t(){var n,a,r,o,s,c,i,u,l;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=e.state,a=n.data,r=n.itemList,o=n.deleted,s=[],c=0;c<r.length;c++)i=r[c],u={},i.props.text?(u.type="VideosetDescription",u.value=i.props.text):i.props.uploadingPicture?(u.type="PictureSlider",u.value=i.props.id):i.props.onVideoClick&&(u.type="VideosContainer",u.value=i.props.id,u.name=i.props.name),s.push(u);return a.order=s,t.next=6,e.webStorageService.patchVideoset(e.props.id,{order:s,name:a.name,owner:a.owner});case 6:if(0===o.length){t.next=20;break}l=0;case 8:if(!(l<o.length)){t.next=20;break}if(!o[l].props.uploadingPicture){t.next=14;break}return t.next=12,e.webStorageService.deleteSlider(o[l].props.id);case 12:t.next=17;break;case 14:if(!o[l].props.onVideoClick){t.next=17;break}return t.next=17,e.webStorageService.deleteVideosContainer(o[l].props.id);case 17:l++,t.next=8;break;case 20:e.setState({data:a,deleted:[]});case 21:case"end":return t.stop()}}),t)}))),e.cancelAction=Object(v.a)(f.a.mark((function t(){var n,a,r,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.state,a=n.startData,r=n.added,o=0;case 2:if(!(o<r.length)){t.next=9;break}if("PictureSlider"!==r[o].type.name){t.next=6;break}return t.next=6,e.webStorageService.deleteSlider(r[o].props.id);case 6:o++,t.next=2;break;case 9:e.setState({data:a,added:[],itemList:[]}),e.initialAddingItems();case 11:case"end":return t.stop()}}),t)}))),e.changeTitle=function(){var t=e.state.data,n=prompt("Input new title",t.name);n&&""!==n&&(t.name=n,e.setState(t))},e.changeLogo=function(){var t=Object(v.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.webStorageService.postLogo(e.state.data.id,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.changeSubcategory=function(t){var n=e.state.data;n.owner=t,e.setState({data:n})},e.deleteVideoset=Object(v.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.webStorageService.deleteVideoset(e.state.data.id);case 2:case"end":return t.stop()}}),t)}))),e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t,n,a,r,o,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.id,n=this.webStorageService,a=n.getVideoset,r=n.getSubcategory,e.next=4,a(t);case 4:return o=e.sent,e.next=7,r(o.owner);case 7:s=e.sent,this.setState({videosetId:t,data:o,startData:o,subcategoryData:s}),this.initialAddingItems();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.data,a=t.columnId,o=t.itemList,s=t.videoPlayer,c=t.showModal;if(!n)return null;var i=n.name,u=r.a.createElement("button",{type:"button",className:"btn btn-outline-danger",onClick:function(){return e.deletingVideo(s.props.video)}},"Delete video"),l=c?r.a.createElement(_,{className:"video-modal",footer:u,onClose:function(){return e.setState({showModal:!1})},show:c,title:s.props.video.name},s):null;return r.a.createElement("div",{className:"videoset"},l,r.a.createElement("h1",{className:" videoset-title"},i),r.a.createElement(B,{changeLogo:this.changeLogo,id:n.id,videoset:n,changeSubcategory:this.changeSubcategory,deleteVideoset:this.deleteVideoset,changeTitle:this.changeTitle,onVideosetElementAdded:this.onVideosetElementAdded,saveChanges:this.saveChanges,cancelAction:this.cancelAction}),r.a.createElement(O,{onDragEnd:this.onDragEnd},r.a.createElement(P,{id:a,items:o,onItemDeleted:this.onVideosetItemDeleted})))}}]),n}(a.Component)),W=(n(56),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).webStorageService=new g,e.state={data:null,showModal:!1,videoPlayer:null,itemList:[],counters:{}},e.componentDidMount=Object(v.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initPage();case 2:case"end":return t.stop()}}),t)}))),e.initPage=Object(v.a)(f.a.mark((function t(){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.id,t.next=3,e.webStorageService.getVideoset(n);case 3:a=t.sent,e.setState({data:a}),e.initialAddingItems();case 6:case"end":return t.stop()}}),t)}))),e.componentDidUpdate=function(){var t=Object(v.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.id===e.props.id){t.next=4;break}return e.setState({data:null,itemList:[]}),t.next=4,e.initPage();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.initialAddingItems=Object(v.a)(f.a.mark((function t(){var n,a,r,o,s,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.state.data,a=n.order,r=0;case 3:if(!(r<a.length)){t.next=27;break}if("VideosetDescription"!==(o=a[r]).type||null===o.value){t.next=10;break}return t.next=8,e.addItemToColumn(A,{text:o.value});case 8:t.next=24;break;case 10:if("PictureSlider"!==o.type||!o.value){t.next=18;break}return t.next=13,e.webStorageService.getPicturesOfSlider(o.value);case 13:return s=t.sent,t.next=16,e.addItemToColumn(S,{id:o.value,dataURLs:s});case 16:t.next=24;break;case 18:if("VideosContainer"!==o.type||!o.value){t.next=24;break}return t.next=21,e.webStorageService.getVideosOfVideosContainer(o.value);case 21:return c=t.sent,t.next=24,e.addItemToColumn(z,{id:o.value,name:o.name,videos:c,onVideoClick:e.onVideoClick});case 24:r++,t.next=3;break;case 27:case"end":return t.stop()}}),t)}))),e.addItemToColumn=function(){var t=Object(v.a)(f.a.mark((function t(n){var a,o,s,c,i,u,l=arguments;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=l.length>1&&void 0!==l[1]?l[1]:{},o=e.state,s=o.itemList,(c=o.counters)[n.name]||(c[n.name]=0),i=c[n.name],u=r.a.createElement(n,Object.assign({key:String(n.name)+i,id:String(n.name)+i},a)),c[n.name]+=1,s.push(u),e.setState({itemList:s,counters:c});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onVideoClick=function(){var t=Object(v.a)(f.a.mark((function t(n){var a,o,s,c,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.videoPlayer,o=n.showModal,s=n.source,c=n.id,"local"===s?(a=r.a.createElement(G,{video:n,url:"".concat(e.webStorageService._apiBase,"/video/").concat(c)}),o=!0):"www.youtube.com"===(i=new J.a(n.file)).hostname?(console.log(i.hostname),a=r.a.createElement(G,{video:n,url:n.file}),o=!0):(window.open(n.file),o=!1),e.setState({videoPlayer:a,showModal:o});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(n,[{key:"render",value:function(){var e=this;if(!this.state.data)return r.a.createElement("div",null);var t=this.state,n=t.data,a=t.itemList,o=t.showModal,s=t.videoPlayer,c=n.name,i=a.map((function(e,t){return r.a.createElement(V,{key:e+""+t},e)})),u=o?r.a.createElement(_,{className:"video-modal",onClose:function(){return e.setState({showModal:!1})},show:o,title:s.props.video.name},s):null,l=function(e){var t=e.id,n=Object(p.f)();return r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("button",{onClick:function(){n.push("/edit-videoset/".concat(t))},type:"button",className:"edit-btn btn btn-lg btn-secondary","data-dismiss":"modal"},"Edit this page"))},d=localStorage.getItem("user"),m=d&&"undefined"!==d?JSON.parse(d):null;return r.a.createElement("div",{className:"videoset"},u,m&&m.status.endsWith("admin")?r.a.createElement(l,{id:n.id}):null,r.a.createElement("h1",{className:"videoset-title"},c),i)}}]),n}(a.Component)),q=(n(57),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).webStorageService=new g,e.state={selectedCategory:null,selectedSubcategory:null,categories:null,subcategories:null,videosets:null,numberOfVideosets:5,last10Videosets:null,user:null},e.componentDidMount=Object(v.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateCategories();case 2:case"end":return t.stop()}}),t)}))),e.onCategorySelected=function(){var t=Object(v.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateSubcategories(n);case 2:e.webStorageService.getLast10Videosets(n.id).then((function(t){e.setState({last10Videosets:t})}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSubcategorySelected=function(){var t=Object(v.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateVideosets(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderVideosets=function(t){var n=t.map((function(t,n){var a="VideosetCard-".concat(n),o=t.hasLogo?"".concat(e.webStorageService._apiBase,"/logo?videosetId=").concat(t.id):null;return r.a.createElement(K,Object.assign({key:a},t,{logoURL:o}))}));return r.a.createElement("div",{className:"videosets-container container"},n)},e.renderList=function(t){return function(n,a,o){var s=e.state.user,c=n.map((function(e,n){var c=e.name,i=e.id;return r.a.createElement("li",{className:"list-group-item d-flex ".concat(n===a?"selected-list-group-item":""),key:i,onClick:function(t){return t.target.className.includes("btn")?null:o(e,n)}},r.a.createElement("div",{className:"flex"},r.a.createElement("h5",{className:"list-item-title"},c)),s&&"main-admin"===s.status?r.a.createElement("button",{className:"btn btn-outline-danger list-delete-button",onClick:function(){return t(e)}},"Delete"):null)}));return r.a.createElement("div",null,r.a.createElement("ul",{className:"item-list list-group"},c))}},e.addCategory=Object(v.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=prompt("Input name of category",""),t.next=3,e.webStorageService.postCategory(n);case 3:return t.next=5,e.updateCategories();case 5:case"end":return t.stop()}}),t)}))),e.addSubcategory=Object(v.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=prompt("Input name of subcategory",""),t.next=3,e.webStorageService.postSubcategory(n,e.state.selectedCategory.id);case 3:return t.next=5,e.updateSubcategories(e.state.selectedCategory);case 5:case"end":return t.stop()}}),t)}))),e.addVideoset=Object(v.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=prompt("Input name of videoset",""),t.next=3,e.webStorageService.postVideoset(n,e.state.selectedSubcategory.id);case 3:return t.next=5,e.updateVideosets(e.state.selectedSubcategory);case 5:case"end":return t.stop()}}),t)}))),e.deleteCategory=function(){var t=Object(v.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({selectedCategory:null,selectedSubcategory:null}),t.next=3,e.webStorageService.deleteCategory(n.id);case 3:return t.next=5,e.updateCategories();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.deleteSubcategory=function(){var t=Object(v.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.webStorageService.deleteSubcategory(n.id);case 2:return e.setState({selectedSubcategory:null}),t.next=5,e.updateSubcategories(e.state.selectedCategory);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.updateCategories=Object(v.a)(f.a.mark((function t(){var n,a,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=localStorage.getItem("user"),a=n&&"undefined"!==n?JSON.parse(n):null,t.next=4,e.webStorageService.getAllCategories();case 4:r=t.sent,e.setState({user:a,categories:r});case 6:case"end":return t.stop()}}),t)}))),e.updateSubcategories=function(){var t=Object(v.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.webStorageService.getSubcategoriesOfCategory(n.id);case 4:a=t.sent,e.setState({subcategories:a,selectedCategory:n,selectedSubcategory:null});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.updateVideosets=function(){var t=Object(v.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.webStorageService.getVideosetsOfSubcategory(n.id);case 4:a=t.sent,e.setState({selectedSubcategory:n,videosets:a,numberOfVideosets:5});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showMoreVideosets=function(){var t=e.state.numberOfVideosets;e.setState({numberOfVideosets:t+5})},e}return Object(i.a)(n,[{key:"render",value:function(){var e,t=this,n=this.state,a=n.user,o=n.categories,s=n.subcategories,c=n.videosets,i=n.last10Videosets,u=n.selectedCategory,l=n.selectedSubcategory,d=n.numberOfVideosets,p=function(e){var t=e.className,n=e.children,a=e.onClick;return r.a.createElement("button",{type:"button",className:"btn btn-outline-".concat(t),onClick:a},n)},m=a&&"main-admin"===a.status?r.a.createElement(p,{className:"success",onClick:function(){return t.addCategory()}},"Add category"):null,f=a&&"main-admin"===a.status?r.a.createElement(p,{className:"success",onClick:function(){return t.addSubcategory()}},"Add subcategory"):null,v=a&&a.status.endsWith("admin")?r.a.createElement(p,{className:"success",onClick:function(){return t.addVideoset()}},"Add videoset"):null,b=r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"all-categories-title"},"All Categories"),r.a.createElement(w,{onItemSelected:this.onCategorySelected,itemList:o,renderItems:this.renderList(this.deleteCategory)}),o&&0!==o.length?null:r.a.createElement("h3",{className:"no-content-message"},"Oops, there's no content"),m)),g=this.state.selectedCategory?r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},(e=u.name,r.a.createElement("h4",{className:"all-categories-title"},'Subcategories of category "',e,'"')),r.a.createElement(w,{onItemSelected:this.onSubcategorySelected,itemList:s,renderItems:this.renderList(this.deleteSubcategory)}),s&&0!==s.length?null:r.a.createElement("h3",{className:"no-content-message"},"Oops, there's no content"),f)):null,h=l||u?r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"videoset-views card-body"},l?function(e){return r.a.createElement("h3",{className:"subcategory-title"},'Videosets of subcategory "',e,'"')}(l.name):function(e){return r.a.createElement("h3",{className:"subcategory-title"},'Last 10 videosets of category "',e,'"')}(u.name),l?r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{className:"btn-group add-videoset-button"},v)):null,l?r.a.createElement(w,{showMore:function(){return t.showMoreVideosets()},maxNumber:d,itemList:c,renderItems:this.renderVideosets}):r.a.createElement(w,{itemList:i,renderItems:this.renderVideosets}))):null;return r.a.createElement("div",null,r.a.createElement("div",{className:"categories-row"},r.a.createElement(Y,{left:b,right:g})),r.a.createElement("div",{className:"videoset-views"},h))}}]),n}(a.Component)),Y=function(e){var t=e.left,n=e.right,a="row-item col-md-".concat(n?6:12);return r.a.createElement("div",{className:"row mb2"},r.a.createElement("div",{className:a},t),r.a.createElement("div",{className:"col-md-6"},n))},K=function(e){var t=e.id,n=e.name,a=e.order,o=e.logoURL,s=e.subcategoryName,c=a?a.find((function(e){return"VideosetDescription"===e.type})):null,i=c?c.value.split("&&&"):["Description",""],u=Object(k.a)(i,2),l=u[0],d=u[1];(d=d.split("\n")[0])&&d.length>=300&&(d=d.slice(0,300)+" ...");var m="/videosets/".concat(t),f=o?r.a.createElement("img",{className:"logo",src:o,alt:""}):null,v=Object(p.f)();return r.a.createElement("div",{key:t,className:"videoset-card card border-success",onClick:function(){v.push(m)}},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{style:{display:"flex"},className:"row"},r.a.createElement("h3",{className:"videoset-preview-title"},n),s?r.a.createElement("h4",{className:"videoset-preview-subcategory-title"},"Subcategory: ",s):null)),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},f,r.a.createElement("div",{className:"videoset-card-description col-9"},r.a.createElement("h4",{className:"card-title"},l,":"),r.a.createElement("p",{className:"card-text"},d||"No description")))))},Q=(n(58),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).webStorageService=new g,e.state={redirect:!1,registerEmail:"",registerPassword:"",registerName:"",registerNickname:"",signInEmail:"",signInPassword:"",onSignInErrorMessage:null,onRegisterErrorMessage:null},e.onSignInButtonClick=Object(v.a)(f.a.mark((function t(){var n,a,r,o,s,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,a=n.signInEmail,r=n.signInPassword,t.next=3,e.webStorageService.signInByCredentials(a,r);case 3:if((o=t.sent).user){t.next=6;break}return t.abrupt("return",e.setState({onSignInErrorMessage:"Incorrect e-mail or password!"}));case 6:e.setState({onRegisterErrorMessage:null}),s=o.user,c=o.token,localStorage.setItem("user",JSON.stringify(s)),localStorage.setItem("token",c),e.setState({redirect:!0}),e.props.onUserUpdate();case 12:case"end":return t.stop()}}),t)}))),e.onRegisterButtonClick=Object(v.a)(f.a.mark((function t(){var n,a,r,o,s,c,i,u;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,a=n.registerName,r=n.registerNickname,o=n.registerEmail,s=n.registerPassword,t.next=3,e.webStorageService.registerByCredentials(a,r,o,s);case 3:if(!(c=t.sent).error){t.next=6;break}return t.abrupt("return",e.setState({onRegisterErrorMessage:c.error}));case 6:e.setState({onRegisterErrorMessage:null}),i=c.user,u=c.token,localStorage.setItem("user",JSON.stringify(i)),localStorage.setItem("token",u),e.setState({redirect:!0}),e.props.onUserUpdate();case 12:case"end":return t.stop()}}),t)}))),e.renderRedirect=function(){if(e.state.redirect)return r.a.createElement(p.a,{to:"/"})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.onRegisterErrorMessage,a=t.onSignInErrorMessage,o=r.a.createElement("div",{className:"login-card card"},r.a.createElement("div",{className:"login"},this.renderRedirect(),r.a.createElement("h3",{className:"login-title"},"Or if you don't"),r.a.createElement("h1",{className:"login-title-second"},"Register"),r.a.createElement("div",{className:"input-group input-group-lg mb-3"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Name","aria-label":"Name",onChange:function(t){var n=t.target;return e.setState({registerName:n.value})}})),r.a.createElement("div",{className:"input-group input-group-lg mb-3"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Nickname","aria-label":"Nickname",onChange:function(t){var n=t.target;return e.setState({registerNickname:n.value})}})),r.a.createElement("div",{className:"input-group input-group-lg mb-3"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"E-mail","aria-label":"E-mail",onChange:function(t){var n=t.target;return e.setState({registerEmail:n.value})}})),r.a.createElement("div",{className:"input-group input-group-lg mb-3"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password","aria-label":"Password",onChange:function(t){var n=t.target;return e.setState({registerPassword:n.value})}})),r.a.createElement("h4",{className:"error-message text-danger"},n),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-secondary login-button",type:"submit",onClick:this.onRegisterButtonClick},"Register")))),s=r.a.createElement("div",{className:"login-card card"},r.a.createElement("div",{className:"login"},r.a.createElement("h3",{className:"login-title"},"If you have an account"),r.a.createElement("h1",{className:"login-title-second"},"Sign in"),r.a.createElement("div",null,r.a.createElement("div",{className:"input-group input-group-lg mb-3"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"E-mail","aria-label":"Username",onChange:function(t){var n=t.target;return e.setState({signInEmail:n.value})}})),r.a.createElement("div",{className:"input-group input-group-lg mb-3"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password","aria-label":"Password",onChange:function(t){var n=t.target;return e.setState({signInPassword:n.value})}})),r.a.createElement("h4",{className:"error-message text-danger"},a),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-secondary login-button",type:"submit",onClick:this.onSignInButtonClick},"Sign in")))));return r.a.createElement("div",{className:"login-page"},r.a.createElement(X,{left:s,right:o}))}}]),n}(a.Component)),X=function(e){var t=e.left,n=e.right,a="row-item col-md-".concat(n?6:12);return r.a.createElement("div",{className:"row mb2"},r.a.createElement("div",{className:a},t),r.a.createElement("div",{className:"col-md-6"},n))},Z=(n(59),function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).webStorageService=new g,e.state={admin:null,allUsers:null,numberOfUsers:20},e.componentDidMount=Object(v.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.updateUsers();case 1:case"end":return t.stop()}}),t)}))),e.updateUsers=Object(v.a)(f.a.mark((function t(){var n,a,r,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=localStorage.getItem("user"))&&"undefined"!==n){t.next=3;break}return t.abrupt("return");case 3:if("main-admin"===(a=JSON.parse(n)).status){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,e.webStorageService.getAllUsers();case 8:r=t.sent,o=r.filter((function(e){return e.id!==a.id})).sort((function(e,t){return t.status.length-e.status.length})),e.setState({admin:a,allUsers:o});case 11:case"end":return t.stop()}}),t)}))),e.changeUserStatus=function(){var t=Object(v.a)(f.a.mark((function t(n,a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.webStorageService.patchUserByMainAdmin(n,a);case 2:return t.next=4,e.updateUsers();case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.renderUserViews=function(t){var n=t.map((function(t,n){var a="User-Card-".concat(n),o="main-admin"===t.status?"border-warning":null;return r.a.createElement($,{extraClassName:o,key:a,user:t,changeStatus:e.changeUserStatus})}));return r.a.createElement("div",{className:"videosets-container container"},n)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.allUsers,a=t.numberOfUsers;return r.a.createElement("div",null,r.a.createElement("h1",{className:"all-users-title"},"All registered users"),r.a.createElement(w,{showMore:function(){return e.setState({numberOfUsers:a+3})},maxNumber:a,itemList:n,renderItems:this.renderUserViews}))}}]),n}(a.Component)),$=function(e){var t=e.user,n=e.changeStatus,a=e.extraClassName,o=t.id,s=t.name,c=t.nickname,i=t.status,u=t.ban,l=t.email,d=function(e,t,n){return r.a.createElement("button",{className:"btn btn-".concat(n||null),onClick:t},e)},p="admin"===i||u?null:d("Make admin",(function(){return n(o,{status:"admin"})}),"primary"),m=u?null:d("Ban user",(function(){return n(o,{ban:!0})}),"danger"),f=u?d("Unban user",(function(){return n(o,{ban:!1})}),"success"):null,v="admin"!==i||u?null:d("Make main-admin",(function(){return n(o,{status:"main-admin"})}),"info"),b="user"===i||u?null:d("Make user",(function(){return n(o,{status:"user"})}),"warning");return r.a.createElement("div",{className:"card border-primary ".concat(a)},r.a.createElement("div",{className:"card-body row d-flex"},r.a.createElement("h4",{className:"user-card-title"},s," @",c," ",l),r.a.createElement("div",{className:"user-view-btn-group btn-group"},v,p,b,m,f)))},ee=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={user:null},e.componentDidMount=function(){e.updateUser()},e.updateUser=function(){try{var t=JSON.parse(localStorage.getItem("user"));e.setState({user:t})}catch(n){e.setState({user:null})}},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state.user;return r.a.createElement("div",null,r.a.createElement(d.a,null,r.a.createElement(x,{user:t,onUserUpdate:function(){return e.updateUser()}}),r.a.createElement(p.b,{path:"/",component:q,exact:!0}),r.a.createElement(p.b,{path:"/users",exact:!0,component:Z}),r.a.createElement(p.b,{path:"/login",exact:!0,render:function(){return r.a.createElement(Q,{onUserUpdate:function(){return e.updateUser()}})}}),r.a.createElement(p.b,{path:"/videosets/:id",render:function(e){var t=e.match;return r.a.createElement(W,{id:t.params.id})}}),r.a.createElement(p.b,{path:"/edit-videoset/:id",render:function(e){var t=e.match;return r.a.createElement(H,{id:t.params.id})}})))}}]),n}(a.Component);s.a.render(r.a.createElement(ee,null),document.getElementById("root"))}]),[[30,1,2]]]);
//# sourceMappingURL=main.3b51994e.chunk.js.map